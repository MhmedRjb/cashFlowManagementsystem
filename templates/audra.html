<!DOCTYPE html>
<html>
    <head>
        <title>Table Data</title>
        <style>
            body {
                font-family: Arial, sans-serif;
            }
            table {
                border-collapse: collapse;
                border: 1px solid black;
                margin: 0 auto;
                width: 50%;
            }
            th, td {
                border: 1px solid black;
                text-align: left;
                padding: 8px;
            }
            tr:nth-child(even) {
                background-color: #f2f2f2;
            }
            th {
                background-color: #4CAF50;
                color: white;
            }
            tr.yes {
                background-color: #90EE90; /* light green */
            }
            tr.no {
                background-color: #FFB6C1; /* light red */
            }
            input[type="submit"] {
    background-color: #4CAF50;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

input[type="submit"]:hover {
    background-color: #45a049;
}

.update-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
}


        </style>
    </head>
    <body>
        <form action="{{ url_for('update_paid') }}" method="post">
            <table>
                <tr>
                    {% for col_name in data.columns %}
                        <th>{{ col_name }}</th>
                    {% endfor %}
                    <th>Update Paid</th>
                </tr>
                {% for row in data.itertuples() %}
                    <tr>
                        {% for value in row[1:] %}
                            <td>{{ value }}</td>
                        {% endfor %}
                        <td>
                            <input type="hidden" name="invoice_id" value="{{ row.InvoiceID }}">
                            <select name="paid">
                                <option value="">Select...</option>
                                <option value="0">No</option>
                                <option value="1">Yes</option>
                            </select>
                        </td>
                    </tr>
                {% endfor %}
            </table>
            <input type="submit" value="Update" class="update-button">
        </form>

        <script>
            // get all the dropdown menus
            var dropdowns = document.querySelectorAll('select[name="paid"]');

            // add an event listener to each dropdown menu
            for (var i = 0; i < dropdowns.length; i++) {
                // store the original value of the dropdown menu
                dropdowns[i].dataset.originalValue = dropdowns[i].value;

                dropdowns[i].addEventListener('change', function() {
                    // get the row element
                    var row = this.closest('tr');

                    // remove any existing color classes from the row
                    row.classList.remove('yes', 'no');

                    // add the appropriate color class depending on the value of the dropdown menu
                    if (this.value === '1') {
                        row.classList.add('yes');
                    } else if (this.value === '0') {
                        row.classList.add('no');
                    }
                });
            }
        </script>
    </body>
</html>
